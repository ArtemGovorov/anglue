{"version":3,"sources":["src/annotation.js"],"names":[],"mappings":"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","file":"src/annotation.js","sourcesContent":["export class Annotation {\n    constructor(name, targetCls) {\n        this.name = name;\n        this.targetCls = targetCls;\n\n        // We allow the decorators to decorate the targetCls\n        // before we create and configure the module\n        this.applyClassDecorators(targetCls);\n    }\n\n    getInjectionTokens() {\n        var tokens = [];\n        var injections = this.injections;\n        Object.keys(injections).forEach((binding) => {\n            tokens.push(injections[binding]);\n        });\n        return tokens;\n    }\n\n    get injections() {\n        return this.targetCls.injections || {};\n    }\n\n    get decorators() {\n        return this.targetCls.decorators || [];\n    }\n\n    get dependencies() {\n        return this.targetCls.dependencies || [];\n    }\n\n    /**\n     * This method can be overriden by child classes to\n     * configure the angular module after it is created\n     * @param {module} module The created angular module\n     */\n    configure(module) {}\n\n    /**\n     * This method applies all the requested injection bindings\n     * from the targetCls to the created instance\n     * @param  {Object} instance The created instance that\n     * wants the bindings\n     * @param  {Array<>} injected An array with the injected\n     * instances that we will apply on the class instance\n     */\n    applyInjectionBindings(instance, injected) {\n        var injections = this.injections;\n\n        Object.keys(injections).forEach((binding, index) => {\n            Object.defineProperty(instance, binding, {\n                value: injected[index]\n            });\n        });\n\n        Object.defineProperty(instance, '_annotation', {\n            value: this\n        });\n    }\n\n    /**\n     * This method decorates the created instance with all the\n     * targetCls decorators\n     * @param  {Object} instance The created instance to be decorated\n     */\n    applyDecorators(instance) {\n        var decorators = this.decorators;\n        for (let decorator of decorators) {\n            if (decorator.decorate instanceof Function) {\n                decorator.decorate(instance);\n            }\n        }\n    }\n\n    /**\n     * This method decorates the class with all the targetCls decorators\n     * @param  {Object} targetCls The targetCls to be decorated\n     */\n    applyClassDecorators(targetCls) {\n        var decorators = this.decorators;\n        for (let decorator of decorators) {\n            if (decorator.decorateClass instanceof Function) {\n                decorator.decorateClass(targetCls);\n            }\n        }\n    }\n\n    /**\n     * Returns all the angular module names for an array of classes\n     * @param  {Array} classes An array of classes you want to module names for\n     * @return {Array} The name of the angular modules for these classes\n     */\n    static getModuleNames(classes = []) {\n        var names = [];\n        for (let cls of classes) {\n            let annotation = cls.annotation;\n            if (annotation) {\n                names.push(annotation.module.name);\n            }\n        }\n        return names;\n    }\n\n    static getAnnotationNames(classes = []) {\n        var names = [];\n        for (let cls of classes) {\n            let annotation = cls.annotation;\n            if (annotation) {\n                names.push(annotation.name);\n            }\n        }\n        return names;\n    }\n}\nexport default Annotation;\n"]}