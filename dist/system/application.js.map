{"version":3,"sources":["src/application.js"],"names":[],"mappings":";;;KAAO,OAAO,EACP,UAAU,oDAEJ,WAAW;;;AAHjB,UAAO;;AACP,aAAU;;;;;;;;;AAEJ,cAAW,qCAAS,UAAU;aAA9B,WAAW;2BAAX,WAAW;;SAAS,UAAU;AAAV,gBAAU;;;;cAA9B,WAAW,EAAS,UAAU;;yBAA9B,WAAW;AACnB,iBAAY;WAAA,YAAG;AAClB,WAAI,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;AAC/B,cAAO,CACN,WAAW,EACX,UAAU,CACV,CAAC,MAAM,CACP,SAAS,CAAC,YAAY,IAAI,EAAE,EAC5B,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,UAAU,CAAC,EACzC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,EACrC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,OAAO,CAAC,CACtC,CAAC;OACF;;;AAEG,WAAM;WAAA,YAAG;AACZ,WAAI,CAAC,IAAI,CAAC,OAAO,EAAE;AAClB,YAAI,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,CAC5B,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,YAAY,CACjB,CAAC;;AAEF,YAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC7B;;AAED,cAAO,IAAI,CAAC,OAAO,CAAC;OACpB;;;AAED,cAAS;aAAA,mBAAC,aAAa,EAAE;;;;AAIxB,oBAAa,CAAC,OAAO,CAAC,uBAAuB,EAAE,CAC9C,oBAAoB,EACpB,UAAS,UAAU,EAAE;AACpB,eAAO,IAAI,UAAU,CAAC,uBAAuB,CAAC,CAAC;QAC/C,CACD,CAAC,CAAC;;AAEH,WAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;AACnC,WAAI,MAAM,EAAE;AACX,qBAAa,CAAC,MAAM,CAAC,CACpB,gBAAgB,EAChB,oBAAoB,EACpB,SAAS,YAAY,CAAC,cAAc,EAAE,kBAAkB,EAAE;AACzD,aAAI,MAAM,CAAC,YAAY,EAAE;AACxB,4BAAkB,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;AAClD,iBAAO,MAAM,CAAC,YAAY,CAAC;UAC3B;;AAED,eAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,UAAC,IAAI,EAAK;AACrC,wBAAc,CAAC,KAAK,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;UACzC,CAAC,CAAC;SACH,CACD,CAAC,CAAC;QACH;OACD;;;;;;WAvDW,WAAW;MAAS,UAAU;sBAyD5B,WAAW","file":"src/application.js","sourcesContent":["import angular from 'angular';\nimport Annotation from './annotation';\n\nexport class Application extends Annotation {\n\tget dependencies() {\n\t\tvar targetCls = this.targetCls;\n\t\treturn [\n\t\t\t'ui.router',\n\t\t\t'luxyflux'\n\t\t].concat(\n\t\t\ttargetCls.dependencies || [],\n\t\t\tthis.getModuleNames(targetCls.components),\n\t\t\tthis.getModuleNames(targetCls.stores),\n\t\t\tthis.getModuleNames(targetCls.actions)\n\t\t);\n\t}\n\n\tget module() {\n\t\tif (!this._module) {\n\t\t\tthis._module = angular.module(\n\t\t\t\tthis.name,\n\t\t\t\tthis.dependencies\n\t\t\t);\n\n\t\t\tthis.configure(this._module);\n\t\t}\n\n\t\treturn this._module;\n\t}\n\n\tconfigure(angularModule) {\n\t\t// The ApplicationDispatcher is the (singleton) dispatcher instance used\n\t\t// in our entire application. Every ActionCreator in this app dispatches\n\t\t// through this instance and all app stores are registered to it\n\t\tangularModule.service('ApplicationDispatcher', [\n\t\t\t'LuxyFluxDispatcher',\n\t\t\tfunction(Dispatcher) {\n\t\t\t\treturn new Dispatcher('ApplicationDispatcher');\n\t\t\t}\n\t\t]);\n\n\t\tvar routes = this.targetCls.routes;\n\t\tif (routes) {\n\t\t\tangularModule.config([\n\t\t\t\t'$stateProvider',\n\t\t\t\t'$urlRouterProvider',\n\t\t\t\tfunction routerConfig($stateProvider, $urlRouterProvider) {\n\t\t\t\t\tif (routes.defaultRoute) {\n\t\t\t\t\t\t$urlRouterProvider.otherwise(routes.defaultRoute);\n\t\t\t\t\t\tdelete routes.defaultRoute;\n\t\t\t\t\t}\n\n\t\t\t\t\tObject.keys(routes).forEach((name) => {\n\t\t\t\t\t\t$stateProvider.state(name, routes[name]);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t]);\n\t\t}\n\t}\n}\nexport default Application;\n"]}