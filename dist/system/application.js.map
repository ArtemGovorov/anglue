{"version":3,"sources":["src/application.js"],"names":[],"mappings":";;;QAAO,OAAO,EACP,UAAU,oDAEJ,WAAW;;;AAHjB,mBAAO;;AACP,sBAAU;;;;;;;;;AAEJ,uBAAW,qCAAS,UAAU;yBAA9B,WAAW;0CAAX,WAAW;;wBAAS,UAAU;AAAV,kCAAU;;;;0BAA9B,WAAW,EAAS,UAAU;;qCAA9B,WAAW;AAChB,gCAAY;6BAAA,YAAG;AACf,gCAAI,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;AAC/B,gCAAI,iBAAiB,GAAG,CAAC,UAAU,CAAC,CAAC;AACrC,gCAAI,SAAS,CAAC,MAAM,EAAE;AAClB,iDAAiB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;6BACvC;AACD,mCAAO,iBAAiB,CAAC,MAAM,CAC3B,SAAS,CAAC,YAAY,IAAI,EAAE,EAC5B,UAAU,CAAC,cAAc,CAAC,SAAS,CAAC,UAAU,CAAC,EAC/C,UAAU,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,EAC3C,UAAU,CAAC,cAAc,CAAC,SAAS,CAAC,OAAO,CAAC,CAC/C,CAAC;yBACL;;;AAEG,0BAAM;6BAAA,YAAG;AACT,gCAAI,CAAC,IAAI,CAAC,OAAO,EAAE;AACf,oCAAI,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,CACzB,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,YAAY,CACpB,CAAC;;AAEF,oCAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;6BAChC;;AAED,mCAAO,IAAI,CAAC,OAAO,CAAC;yBACvB;;;AAED,6BAAS;+BAAA,mBAAC,aAAa,EAAE;;;;AAIrB,yCAAa,CAAC,OAAO,CAAC,uBAAuB,EAAE,CAC3C,oBAAoB,EACpB,UAAS,UAAU,EAAE;AACjB,uCAAO,IAAI,UAAU,CAAC,uBAAuB,CAAC,CAAC;6BAClD,CACJ,CAAC,CAAC;;AAEH,gCAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;AACnC,gCAAI,MAAM,EAAE;AACR,6CAAa,CAAC,MAAM,CAAC,CACjB,gBAAgB,EAChB,oBAAoB,EACpB,SAAS,YAAY,CAAC,cAAc,EAAE,kBAAkB,EAAE;AACtD,wCAAI,MAAM,CAAC,YAAY,EAAE;AACrB,0DAAkB,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;AAClD,+CAAO,MAAM,CAAC,YAAY,CAAC;qCAC9B;;AAED,0CAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,UAAC,IAAI,EAAK;AAClC,sDAAc,CAAC,KAAK,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;qCAC5C,CAAC,CAAC;iCACN,CACJ,CAAC,CAAC;6BACN;yBACJ;;;;;;uBAxDQ,WAAW;eAAS,UAAU;+BA0D5B,WAAW","file":"src/application.js","sourcesContent":["import angular from 'angular';\nimport Annotation from './annotation';\n\nexport class Application extends Annotation {\n    get dependencies() {\n        var targetCls = this.targetCls;\n        var extraDependencies = ['luxyflux'];\n        if (targetCls.routes) {\n            extraDependencies.push('ui.router');\n        }\n        return extraDependencies.concat(\n            targetCls.dependencies || [],\n            Annotation.getModuleNames(targetCls.components),\n            Annotation.getModuleNames(targetCls.stores),\n            Annotation.getModuleNames(targetCls.actions)\n        );\n    }\n\n    get module() {\n        if (!this._module) {\n            this._module = angular.module(\n                this.name,\n                this.dependencies\n            );\n\n            this.configure(this._module);\n        }\n\n        return this._module;\n    }\n\n    configure(angularModule) {\n        // The ApplicationDispatcher is the (singleton) dispatcher instance used\n        // in our entire application. Every ActionCreator in this app dispatches\n        // through this instance and all app stores are registered to it\n        angularModule.service('ApplicationDispatcher', [\n            'LuxyFluxDispatcher',\n            function(Dispatcher) {\n                return new Dispatcher('ApplicationDispatcher');\n            }\n        ]);\n\n        var routes = this.targetCls.routes;\n        if (routes) {\n            angularModule.config([\n                '$stateProvider',\n                '$urlRouterProvider',\n                function routerConfig($stateProvider, $urlRouterProvider) {\n                    if (routes.defaultRoute) {\n                        $urlRouterProvider.otherwise(routes.defaultRoute);\n                        delete routes.defaultRoute;\n                    }\n\n                    Object.keys(routes).forEach((name) => {\n                        $stateProvider.state(name, routes[name]);\n                    });\n                }\n            ]);\n        }\n    }\n}\nexport default Application;\n"]}