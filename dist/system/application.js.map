{"version":3,"sources":["src/application.js"],"names":[],"mappings":";;;uEAGa,WAAW;;;;;;;;;;;;;;;;;AAAX,uBAAW;yBAAX,WAAW;0CAAX,WAAW;;;;;;;0BAAX,WAAW;;6BAAX,WAAW;;yBACJ,YAAG;AACf,4BAAI,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;AAC/B,4BAAI,iBAAiB,GAAG,CAAC,UAAU,CAAC,CAAC;AACrC,4BAAI,SAAS,CAAC,MAAM,EAAE;AAClB,6CAAiB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;yBACvC;AACD,+BAAO,iBAAiB,CAAC,MAAM,CAC3B,SAAS,CAAC,YAAY,IAAI,EAAE,EAC5B,UAAU,CAAC,cAAc,CAAC,SAAS,CAAC,UAAU,CAAC,EAC/C,UAAU,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,EAC3C,UAAU,CAAC,cAAc,CAAC,SAAS,CAAC,OAAO,CAAC,CAC/C,CAAC;qBACL;;;yBAES,YAAG;AACT,4BAAI,CAAC,IAAI,CAAC,OAAO,EAAE;AACf,gCAAM,eAAe,GAAG,UAAU,CAAC,yBAAyB,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;AACpF,gCAAM,cAAc,GAAG,eAAe,CAAC,MAAM,CAAC,CAAC,YAAM,EAAE,CAAC,CAAC,CAAC;;AAE1D,gCAAI,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,CACzB,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,YAAY,CACpB,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;;AAEtB,gCAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;yBAChC;;AAED,+BAAO,IAAI,CAAC,OAAO,CAAC;qBACvB;;;2BAEQ,mBAAC,aAAa,EAAE;;;;AAIrB,qCAAa,CAAC,OAAO,CAAC,uBAAuB,EAAE,CAC3C,oBAAoB,EACpB,UAAS,UAAU,EAAE;AACjB,mCAAO,IAAI,UAAU,CAAC,uBAAuB,CAAC,CAAC;yBAClD,CACJ,CAAC,CAAC;;AAEH,4BAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;AACnC,4BAAI,MAAM,EAAE;AACR,yCAAa,CAAC,MAAM,CAAC,CACjB,gBAAgB,EAChB,oBAAoB,EACpB,SAAS,YAAY,CAAC,cAAc,EAAE,kBAAkB,EAAE;AACtD,oCAAI,MAAM,CAAC,YAAY,EAAE;AACrB,sDAAkB,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;AAClD,2CAAO,MAAM,CAAC,YAAY,CAAC;iCAC9B;;AAED,sCAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,UAAC,IAAI,EAAK;AAClC,kDAAc,CAAC,KAAK,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;iCAC5C,CAAC,CAAC;6BACN,CACJ,CAAC,CAAC;yBACN;qBACJ;;;uBA3DQ,WAAW;eAAS,UAAU;;mCAA9B,WAAW;;+BA6DT,WAAW","file":"src/application.js","sourcesContent":["import angular from 'angular';\nimport Annotation from './annotation';\n\nexport class Application extends Annotation {\n    get dependencies() {\n        var targetCls = this.targetCls;\n        var extraDependencies = ['luxyflux'];\n        if (targetCls.routes) {\n            extraDependencies.push('ui.router');\n        }\n        return extraDependencies.concat(\n            targetCls.dependencies || [],\n            Annotation.getModuleNames(targetCls.components),\n            Annotation.getModuleNames(targetCls.stores),\n            Annotation.getModuleNames(targetCls.actions)\n        );\n    }\n\n    get module() {\n        if (!this._module) {\n            const annotationNames = Annotation.getAnnotationServiceNames(this.targetCls.stores);\n            const controllerDeps = annotationNames.concat([() => {}]);\n\n            this._module = angular.module(\n                this.name,\n                this.dependencies\n            ).run(controllerDeps);\n\n            this.configure(this._module);\n        }\n\n        return this._module;\n    }\n\n    configure(angularModule) {\n        // The ApplicationDispatcher is the (singleton) dispatcher instance used\n        // in our entire application. Every ActionCreator in this app dispatches\n        // through this instance and all app stores are registered to it\n        angularModule.service('ApplicationDispatcher', [\n            'LuxyFluxDispatcher',\n            function(Dispatcher) {\n                return new Dispatcher('ApplicationDispatcher');\n            }\n        ]);\n\n        var routes = this.targetCls.routes;\n        if (routes) {\n            angularModule.config([\n                '$stateProvider',\n                '$urlRouterProvider',\n                function routerConfig($stateProvider, $urlRouterProvider) {\n                    if (routes.defaultRoute) {\n                        $urlRouterProvider.otherwise(routes.defaultRoute);\n                        delete routes.defaultRoute;\n                    }\n\n                    Object.keys(routes).forEach((name) => {\n                        $stateProvider.state(name, routes[name]);\n                    });\n                }\n            ]);\n        }\n    }\n}\nexport default Application;\n"]}