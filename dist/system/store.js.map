{"version":3,"sources":["src/store.js"],"names":[],"mappings":";;;QAAO,OAAO,EACP,UAAU,iGAEJ,KAAK;;;AAHX,mBAAO;;AACP,sBAAU;;;;;;;;;;;;;;;AAEJ,iBAAK,+BAAS,UAAU;yBAAxB,KAAK;0CAAL,KAAK;;wBAAS,UAAU;AAAV,kCAAU;;;;0BAAxB,KAAK,EAAS,UAAU;;qCAAxB,KAAK;AACV,+BAAW;6BAAA,YAAG;AACd,gCAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AACrB,mCAAO,IAAI,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC;yBAC1D;;;AAED,sCAAkB;+BAAA,8BAAG;AACjB,mCAAO,CACH,UAAU,EACV,eAAe,EACf,uBAAuB,CAC1B,CAAC,MAAM,4BAXH,KAAK,oDAW0B,CAAC;yBACxC;;;;AAEG,6BAAS;6BAAA,YAAG;AACZ,gCAAI,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;AAC/B,gCAAI,UAAU,GAAG,IAAI,CAAC;;AAEtB,mCAAO,UAAS,QAAQ,EAAE,aAAa,EAAE,qBAAqB,EAAE;AAC5D,oCAAI,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AAC9C,oCAAI,QAAQ,qBAAO,SAAS,qBAAI,QAAQ,EAAC,CAAC;;AAE1C,0CAAU,CAAC,sBAAsB,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;AACtD,0CAAU,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;;AAErC,uCAAO,QAAQ,CAAC,WAAW,CAAC;AACxB,wCAAI,EAAE,QAAQ,GAAG,UAAU,CAAC,IAAI;AAChC,8CAAU,EAAE,qBAAqB;AACjC,4CAAQ,EAAE,SAAS,CAAC,QAAQ;AAC5B,4CAAQ,EAAE,QAAQ;iCACrB,EAAE,aAAa,CAAC,CAAC;6BACrB,CAAC;yBACL;;;AAEG,0BAAM;6BAAA,YAAG;AACT,gCAAI,CAAC,IAAI,CAAC,OAAO,EAAE;AACf,oCAAI,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,CACzB,SAAS,GAAG,IAAI,CAAC,IAAI,EACrB,IAAI,CAAC,YAAY,CACpB,CAAC;;AAEF,oCAAI,CAAC,OAAO,CAAC,OAAO,CAChB,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,kBAAkB,EAAE,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CACrD,CAAC;;AAEF,oCAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;6BAChC;AACD,mCAAO,IAAI,CAAC,OAAO,CAAC;yBACvB;;;;;uBAjDQ,KAAK;eAAS,UAAU;+BAoDtB,KAAK","file":"src/store.js","sourcesContent":["import angular from 'angular';\nimport Annotation from './annotation';\n\nexport class Store extends Annotation {\n    get serviceName() {\n        var name = this.name;\n        return name[0].toUpperCase() + name.slice(1) + 'Store';\n    }\n\n    getInjectionTokens() {\n        return [\n            'LuxyFlux',\n            'LuxyFluxStore',\n            'ApplicationDispatcher'\n        ].concat(super.getInjectionTokens());\n    }\n\n    get factoryFn() {\n        var TargetCls = this.targetCls;\n        var annotation = this;\n\n        return function(LuxyFlux, LuxyFluxStore, ApplicationDispatcher) {\n            var injected = Array.from(arguments).slice(3);\n            var instance = new TargetCls(...injected);\n\n            annotation.applyInjectionBindings(instance, injected);\n            annotation.applyDecorators(instance);\n\n            return LuxyFlux.createStore({\n                name: 'store.' + annotation.name,\n                dispatcher: ApplicationDispatcher,\n                handlers: TargetCls.handlers,\n                decorate: instance\n            }, LuxyFluxStore);\n        };\n    }\n\n    get module() {\n        if (!this._module) {\n            this._module = angular.module(\n                'stores.' + this.name,\n                this.dependencies\n            );\n\n            this._module.factory(\n                this.serviceName,\n                this.getInjectionTokens().concat([this.factoryFn])\n            );\n\n            this.configure(this._module);\n        }\n        return this._module;\n    }\n}\n\nexport default Store;\n"]}