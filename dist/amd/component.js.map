{"version":3,"sources":["src/component.js"],"names":[],"mappings":";;;;;;;;;;;;;QAAO,UAAU;;QAEX,SAAS,cAAS,UAAU;iBAA5B,SAAS;kCAAT,SAAS;;gBAAS,UAAU;AAAV,0BAAU;;;;kBAA5B,SAAS,EAAS,UAAU;;6BAA5B,SAAS;AACP,kBAAM;qBAAA,YAAG;;AACT,wBAAI,CAAC,IAAI,CAAC,OAAO,EAAE;4BACX,IAAI;4BACJ,UAAU;4BACV,UAAU;4BACV,eAAe;4BACf,YAAY;4BACZ,mBAAmB;;AALnB,gCAAI,GAAG,MAAK,IAAI;AAChB,sCAAU,GAAG,MAAK,UAAU;AAC5B,sCAAU,GAAG,MAAK,UAAU;AAC5B,2CAAe,GAAG,EAAE;AACpB,wCAAY,GAAG,MAAK,SAAS;AAC7B,+CAAmB,QAAO;;;AAE9B,kCAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,UAAC,OAAO,EAAK;AACzC,+CAAe,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC;6BAC7C,CAAC,CAAC;;gCAEG,aAAa,cAAS,YAAY;AACzB,yCADT,aAAa;;0DAAb,aAAa;;AAEX,wCAAI,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AACrC,0CAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,UAAC,OAAO,EAAE,KAAK,EAAK;AAChD,8CAAM,CAAC,cAAc,SAEjB,OAAO,EACP,EAAC,KAAK,EAAE,QAAQ,CAAC,KAAK,CAAC,EAAC,CAC3B,CAAC;qCACL,CAAC,CAAC;AACH,0CAAM,CAAC,cAAc,CACjB,IAAI,EACJ,sBAAsB,EACtB,EAAC,KAAK,EAAE,mBAAmB,EAAC,CAC/B,CAAC;;AAEF,yDAAsB,UAAU;4CAAvB,SAAS;AACd,iDAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;qCAC5B;;AAED,+DApBF,aAAa,8CAoBF,SAAS,EAAE;;AAEpB,wCAAI,IAAI,CAAC,QAAQ,YAAY,QAAQ,EAAE;AACnC,4CAAI,CAAC,QAAQ,EAAE,CAAC;qCACnB;iCACJ;;0CAzBC,aAAa,EAAS,YAAY;;uCAAlC,aAAa;+BAAS,YAAY;;AA0BvC,6BAAC;AACF,2CAAe,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;;AAEpC,kCAAK,OAAO,GAAG,OAAO,CAAC,MAAM,CACzB,aAAa,GAAG,IAAI,EACpB,MAAK,YAAY,CACpB,CAAC;AACF,kCAAK,OAAO,CAAC,SAAS,CAAC,IAAI,EAAE,YAAM;AAC/B,uCAAO;AACH,4CAAQ,EAAE,GAAG;AACb,gDAAY,EAAE,IAAI;AAClB,oDAAgB,EAAE,IAAI;AACtB,8CAAU,EAAE,eAAe;iCAC9B,CAAA;6BACJ,CAAC,CAAC;;qBACN;;AAED,2BAAO,IAAI,CAAC,OAAO,CAAC;iBACvB;;;;;eA1DC,SAAS;OAAS,UAAU;;qBA4DnB,SAAS","file":"src/component.js","sourcesContent":["import Annotation from './annotation';\n\nclass Component extends Annotation {\n    get module() {\n        if (!this._module) {\n            var name = this.name;\n            var injections = this.injections;\n            var decorators = this.decorators;\n            var controllerArray = [];\n            var ComponentCls = this.targetCls;\n            var componentAnnotation = this;\n\n            Object.keys(injections).forEach((binding) => {\n                controllerArray.push(injections[binding]);\n            });\n\n            class ControllerCls extends ComponentCls {\n                constructor() {\n                    var injected = Array.from(arguments);\n                    Object.keys(injections).forEach((binding, index) => {\n                        Object.defineProperty(\n                            this,\n                            binding,\n                            {value: injected[index]}\n                        );\n                    });\n                    Object.defineProperty(\n                        this,\n                        '_componentAnnotation',\n                        {value: componentAnnotation}\n                    );\n\n                    for (let decorator of decorators) {\n                        decorator.decorate(this);\n                    }\n\n                    super(...arguments);\n\n                    if (this.activate instanceof Function) {\n                        this.activate();\n                    }\n                }\n            };\n            controllerArray.push(ControllerCls);\n\n            this._module = angular.module(\n                'components.' + name,\n                this.dependencies\n            );\n            this._module.directive(name, () => {\n                return {\n                    restrict: 'E',\n                    controllerAs: name,\n                    bindToController: true,\n                    controller: controllerArray\n                }\n            });\n        }\n\n        return this._module;\n    }\n}\nexport default Component;\n"]}