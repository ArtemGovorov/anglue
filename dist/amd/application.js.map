{"version":3,"sources":["src/application.js"],"names":[],"mappings":";;;;;;;;;;;KAAO,OAAO;;KACP,UAAU;;KAEJ,WAAW,WAAX,WAAW,cAAS,UAAU;WAA9B,WAAW;yBAAX,WAAW;;OAAS,UAAU;AAAV,cAAU;;;;YAA9B,WAAW,EAAS,UAAU;;uBAA9B,WAAW;AACnB,eAAY;SAAA,YAAG;AAClB,SAAI,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;AAC/B,YAAO,CACN,WAAW,EACX,UAAU,CACV,CAAC,MAAM,CACP,SAAS,CAAC,YAAY,IAAI,EAAE,EAC5B,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,UAAU,CAAC,EACzC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,EACrC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,OAAO,CAAC,CACtC,CAAC;KACF;;;AAEG,SAAM;SAAA,YAAG;AACZ,SAAI,CAAC,IAAI,CAAC,OAAO,EAAE;AAClB,UAAI,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,CAC5B,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,YAAY,CACjB,CAAC;;AAEF,UAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;MAC7B;;AAED,YAAO,IAAI,CAAC,OAAO,CAAC;KACpB;;;AAED,YAAS;WAAA,mBAAC,aAAa,EAAE;;;;AAIxB,kBAAa,CAAC,OAAO,CAAC,uBAAuB,EAAE,CAC9C,oBAAoB,EACpB,UAAS,UAAU,EAAE;AACpB,aAAO,IAAI,UAAU,CAAC,uBAAuB,CAAC,CAAC;MAC/C,CACD,CAAC,CAAC;;AAEH,SAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;AACnC,SAAI,MAAM,EAAE;AACX,mBAAa,CAAC,MAAM,CAAC,CACpB,gBAAgB,EAChB,oBAAoB,EACpB,SAAS,YAAY,CAAC,cAAc,EAAE,kBAAkB,EAAE;AACzD,WAAI,MAAM,CAAC,YAAY,EAAE;AACxB,0BAAkB,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;AAClD,eAAO,MAAM,CAAC,YAAY,CAAC;QAC3B;;AAED,aAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,UAAC,IAAI,EAAK;AACrC,sBAAc,CAAC,KAAK,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;QACzC,CAAC,CAAC;OACH,CACD,CAAC,CAAC;MACH;KACD;;;;;;SAvDW,WAAW;IAAS,UAAU;sBAyD5B,WAAW","file":"src/application.js","sourcesContent":["import angular from 'angular';\nimport Annotation from './annotation';\n\nexport class Application extends Annotation {\n\tget dependencies() {\n\t\tvar targetCls = this.targetCls;\n\t\treturn [\n\t\t\t'ui.router',\n\t\t\t'luxyflux'\n\t\t].concat(\n\t\t\ttargetCls.dependencies || [],\n\t\t\tthis.getModuleNames(targetCls.components),\n\t\t\tthis.getModuleNames(targetCls.stores),\n\t\t\tthis.getModuleNames(targetCls.actions)\n\t\t);\n\t}\n\n\tget module() {\n\t\tif (!this._module) {\n\t\t\tthis._module = angular.module(\n\t\t\t\tthis.name,\n\t\t\t\tthis.dependencies\n\t\t\t);\n\n\t\t\tthis.configure(this._module);\n\t\t}\n\n\t\treturn this._module;\n\t}\n\n\tconfigure(angularModule) {\n\t\t// The ApplicationDispatcher is the (singleton) dispatcher instance used\n\t\t// in our entire application. Every ActionCreator in this app dispatches\n\t\t// through this instance and all app stores are registered to it\n\t\tangularModule.service('ApplicationDispatcher', [\n\t\t\t'LuxyFluxDispatcher',\n\t\t\tfunction(Dispatcher) {\n\t\t\t\treturn new Dispatcher('ApplicationDispatcher');\n\t\t\t}\n\t\t]);\n\n\t\tvar routes = this.targetCls.routes;\n\t\tif (routes) {\n\t\t\tangularModule.config([\n\t\t\t\t'$stateProvider',\n\t\t\t\t'$urlRouterProvider',\n\t\t\t\tfunction routerConfig($stateProvider, $urlRouterProvider) {\n\t\t\t\t\tif (routes.defaultRoute) {\n\t\t\t\t\t\t$urlRouterProvider.otherwise(routes.defaultRoute);\n\t\t\t\t\t\tdelete routes.defaultRoute;\n\t\t\t\t\t}\n\n\t\t\t\t\tObject.keys(routes).forEach((name) => {\n\t\t\t\t\t\t$stateProvider.state(name, routes[name]);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t]);\n\t\t}\n\t}\n}\nexport default Application;\n"]}