{"version":3,"sources":["src/application.js"],"names":[],"mappings":";;;;;;;;;;;QAAO,OAAO;;QACP,UAAU;;QAEJ,WAAW,WAAX,WAAW,cAAS,UAAU;iBAA9B,WAAW;kCAAX,WAAW;;gBAAS,UAAU;AAAV,0BAAU;;;;kBAA9B,WAAW,EAAS,UAAU;;6BAA9B,WAAW;AAChB,wBAAY;qBAAA,YAAG;AACf,wBAAI,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;AAC/B,2BAAO,CACH,WAAW,EACX,UAAU,CACb,CAAC,MAAM,CACJ,SAAS,CAAC,YAAY,EACtB,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,UAAU,CAAC,EACzC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,EACrC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,OAAO,CAAC,CACzC,CAAC;iBACL;;;AAEG,kBAAM;qBAAA,YAAG;AACT,wBAAI,CAAC,IAAI,CAAC,OAAO,EAAE;AACf,4BAAI,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,CACzB,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,YAAY,CACpB,CAAC;;AAEF,4BAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;qBAChC;;AAED,2BAAO,IAAI,CAAC,OAAO,CAAC;iBACvB;;;AAED,qBAAS;uBAAA,mBAAC,aAAa,EAAE;;;;AAIrB,iCAAa,CAAC,OAAO,CAAC,uBAAuB,EAAE,CAC3C,oBAAoB,EACpB,YAAY,EACZ,UAAS,UAAU,EAAE,UAAU,EAAE;AAC7B,+BAAO,IAAI,UAAU,CACjB,uBAAuB,EACvB,UAAU,CACb,CAAC;qBACL,CACJ,CAAC,CAAC;;AAEH,wBAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;AACnC,wBAAI,MAAM,EAAE;AACR,qCAAa,CAAC,MAAM,CAAC,CACjB,gBAAgB,EAChB,oBAAoB,EACpB,SAAS,YAAY,CAAC,cAAc,EAAE,kBAAkB,EAAE;AACtD,gCAAI,MAAM,CAAC,YAAY,EAAE;AACrB,kDAAkB,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;AAClD,uCAAO,MAAM,CAAC,YAAY,CAAC;6BAC9B;;AAED,kCAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,UAAC,IAAI,EAAK;AAClC,8CAAc,CAAC,KAAK,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;6BAC5C,CAAC,CAAC;yBACN,CACJ,CAAC,CAAC;qBACN;iBACJ;;;;;;eA3DQ,WAAW;OAAS,UAAU;yBA6D5B,WAAW","file":"src/application.js","sourcesContent":["import angular from 'angular';\nimport Annotation from './annotation';\n\nexport class Application extends Annotation {\n    get dependencies() {\n        var targetCls = this.targetCls;\n        return [\n            'ui.router',\n            'luxyflux'\n        ].concat(\n            targetCls.dependencies,\n            this.getModuleNames(targetCls.components),\n            this.getModuleNames(targetCls.stores),\n            this.getModuleNames(targetCls.actions)\n        );\n    }\n\n    get module() {\n        if (!this._module) {\n            this._module = angular.module(\n                this.name,\n                this.dependencies\n            );\n\n            this.configure(this._module);\n        }\n\n        return this._module;\n    }\n\n    configure(angularModule) {\n        // The ApplicationDispatcher is the (singleton) dispatcher instance used\n        // in our entire application. Every ActionCreator in this app dispatches\n        // through this instance and all app stores are registered to it\n        angularModule.service('ApplicationDispatcher', [\n            'LuxyFluxDispatcher',\n            '$rootScope',\n            function(Dispatcher, $rootScope) {\n                return new Dispatcher(\n                    'ApplicationDispatcher',\n                    $rootScope\n                );\n            }\n        ]);\n\n        var routes = this.targetCls.routes;\n        if (routes) {\n            angularModule.config([\n                '$stateProvider',\n                '$urlRouterProvider',\n                function routerConfig($stateProvider, $urlRouterProvider) {\n                    if (routes.defaultRoute) {\n                        $urlRouterProvider.otherwise(routes.defaultRoute);\n                        delete routes.defaultRoute;\n                    }\n\n                    Object.keys(routes).forEach((name) => {\n                        $stateProvider.state(name, routes[name]);\n                    });\n                }\n            ]);\n        }\n    }\n}\nexport default Application;\n"]}