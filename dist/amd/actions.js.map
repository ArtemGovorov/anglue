{"version":3,"sources":["src/actions.js"],"names":[],"mappings":";;;;;;;;;;;QAAO,UAAU;;QAEX,OAAO,cAAS,UAAU;iBAA1B,OAAO;kCAAP,OAAO;;gBAAS,UAAU;AAAV,0BAAU;;;;kBAA1B,OAAO,EAAS,UAAU;;6BAA1B,OAAO;AACL,kBAAM;qBAAA,YAAG;AACT,wBAAI,CAAC,IAAI,CAAC,OAAO,EAAE;AACf,4BAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AACrB,4BAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;AACjC,4BAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;AACjC,4BAAI,YAAY,GAAG,CAAC,UAAU,EAAE,uBAAuB,CAAC,CAAC;AACzD,4BAAI,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC;AAChC,4BAAI,iBAAiB,GAAG,IAAI,CAAC;AAC7B,4BAAI,WAAW,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC;;AAEpE,8BAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,UAAC,OAAO,EAAK;AACzC,wCAAY,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC;yBAC1C,CAAC,CAAC;;AAEH,4BAAI,SAAS,GAAG,YAAW;AACvB,gCAAI,OAAO,GAAG,IAAI,UAAU,EAAE,CAAC;AAC/B,gCAAI,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AACjC,gCAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AAC7B,kCAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,UAAC,OAAO,EAAE,KAAK,EAAK;AAChD,sCAAM,CAAC,cAAc,CACjB,OAAO,EACP,OAAO,EACP,EAAC,KAAK,EAAE,QAAQ,CAAC,KAAK,CAAC,EAAC,CAC3B,CAAC;6BACL,CAAC,CAAC;AACH,kCAAM,CAAC,cAAc,CACjB,OAAO,EACP,oBAAoB,EACpB,EAAC,KAAK,EAAE,iBAAiB,EAAC,CAC7B,CAAC;;AAEF,iDAAsB,UAAU;oCAAvB,SAAS;AACd,yCAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;6BAC5B;;AAED,gCAAI,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;AACvB,gCAAI,qBAAqB,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;;AAEpC,mCAAO,QAAQ,CAAC,aAAa,CAAC;AAC1B,0CAAU,EAAE,qBAAqB;AACjC,8CAAc,EAAE,UAAU,CAAC,cAAc;AACzC,wCAAQ,EAAE,OAAO;6BACpB,CAAC,CAAC;yBACN,CAAC;AACF,oCAAY,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;AAE7B,4BAAI,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,CACzB,UAAU,GAAG,IAAI,EACjB,IAAI,CAAC,YAAY,CACpB,CAAC;AACF,4BAAI,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,EAAE,YAAY,CAAC,CAAC;qBACnD;AACD,2BAAO,IAAI,CAAC,OAAO,CAAC;iBACvB;;;;;eAtDC,OAAO;OAAS,UAAU;;qBAwDjB,OAAO","file":"src/actions.js","sourcesContent":["import Annotation from './annotation';\n\nclass Actions extends Annotation {\n    get module() {\n        if (!this._module) {\n            var name = this.name;\n            var injections = this.injections;\n            var decorators = this.decorators;\n            var factoryArray = ['LuxaFlux', 'ApplicationDispatcher'];\n            var ActionsCls = this.targetCls;\n            var actionsAnnotation = this;\n            var factoryName = name[0].toUpperCase() + name.slice(1) + 'Actions';\n\n            Object.keys(injections).forEach((binding) => {\n                factoryArray.push(injections[binding]);\n            });\n\n            var factoryFn = function() {\n                var actions = new ActionsCls();\n                var args = Array.from(arguments);\n                var injected = args.slice(2);\n                Object.keys(injections).forEach((binding, index) => {\n                    Object.defineProperty(\n                        actions,\n                        binding,\n                        {value: injected[index]}\n                    );\n                });\n                Object.defineProperty(\n                    actions,\n                    '_actionsAnnotation',\n                    {value: actionsAnnotation}\n                );\n\n                for (let decorator of decorators) {\n                    decorator.decorate(this);\n                }\n\n                var LuxaFlux = args[0];\n                var ApplicationDispatcher = args[1];\n\n                return LuxaFlux.createActions({\n                    dispatcher: ApplicationDispatcher,\n                    serviceActions: ActionsCls.serviceActions,\n                    decorate: actions\n                });\n            };\n            factoryArray.push(factoryFn);\n\n            this._module = angular.module(\n                'actions.' + name,\n                this.dependencies\n            );\n            this._module.factory(factoryName, factoryArray);\n        }\n        return this._module;\n    }\n}\nexport default Actions;\n"]}